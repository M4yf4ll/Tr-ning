import React, { useState, useEffect } from â€˜reactâ€™;
import { Play, Pause, RotateCcw, ChevronRight, Info } from â€˜lucide-reactâ€™;

const FirefighterWorkout = () => {
const [currentBlock, setCurrentBlock] = useState(0);
const [currentExercise, setCurrentExercise] = useState(0);
const [currentRound, setCurrentRound] = useState(1);
const [timeLeft, setTimeLeft] = useState(0);
const [isRunning, setIsRunning] = useState(false);
const [isRest, setIsRest] = useState(false);
const [showInfo, setShowInfo] = useState(null);

const workout = [
{
name: â€œBlock 1: Konditionâ€,
rounds: 4,
workTime: 40,
restTime: 20,
exercises: [
{
name: â€œBurpeesâ€,
description: â€œ1. StÃ¥ upprÃ¤tt\n2. SÃ¤tt hÃ¤nderna i golvet\n3. Hoppa benen bakÃ¥t till plankposition\n4. Hoppa benen fram igen\n5. StÃ¥ upp och hoppa\n\nTips: GÃ¶r push-up i plankan om du orkar!â€
},
{
name: â€œMountain Climbersâ€,
description: â€œ1. BÃ¶rja i plankposition (raka armar)\n2. Dra hÃ¶ger knÃ¤ mot brÃ¶stet\n3. Byt snabbt - vÃ¤nster knÃ¤ fram\n4. FortsÃ¤tt vÃ¤xla i snabb takt\n\nTips: HÃ¥ll hÃ¶ften lÃ¥g, rÃ¶r benen snabbt!â€
},
{
name: â€œJump Squatsâ€,
description: â€œ1. StÃ¥ med fÃ¶tterna brett isÃ¤r\n2. GÃ¥ ner i djup knÃ¤bÃ¶j\n3. Explodera upp i ett hopp\n4. Landa mjukt och gÃ¥ direkt ner igen\n\nTips: Landa pÃ¥ mjuka knÃ¤n fÃ¶r att skona leden!â€
},
{
name: â€œHigh Kneesâ€,
description: â€œ1. Spring pÃ¥ plats\n2. Lyft knÃ¤na sÃ¥ hÃ¶gt du kan\n3. HÃ¥ll hÃ¶g tempo\n4. Pumpa med armarna\n\nTips: KnÃ¤na ska upp mot brÃ¶sthÃ¶jd!â€
}
]
},
{
name: â€œBlock 2: Styrkaâ€,
rounds: 3,
workTime: 45,
restTime: 15,
exercises: [
{
name: â€œPush-upsâ€,
description: â€œ1. Plankposition med hÃ¤nderna axelbrett\n2. SÃ¤nk kroppen genom att bÃ¶ja armbÃ¥garna\n3. Tryck upp till utgÃ¥ngslÃ¤get\n4. HÃ¥ll kroppen rak hela tiden\n\nTips: GÃ¶r pÃ¥ knÃ¤na om det Ã¤r fÃ¶r tungt!â€
},
{
name: â€œWalking Lungesâ€,
description: â€œ1. StÃ¥ upprÃ¤tt\n2. Ta ett stort steg framÃ¥t med hÃ¶ger ben\n3. SÃ¤nk vÃ¤nster knÃ¤ mot golvet\n4. Res dig och ta nÃ¤sta steg med vÃ¤nster\n5. FortsÃ¤tt gÃ¥ framÃ¥t\n\nTips: HÃ¥ll Ã¶verkroppen upprÃ¤tt, knÃ¤et bakom tÃ¥rna!â€
},
{
name: â€œPlank Holdâ€,
description: â€œ1. Ligg pÃ¥ mage\n2. StÃ¶d pÃ¥ underarmarna och tÃ¥rna\n3. Lyft kroppen - bli rak som en planka\n4. HÃ¥ll position\n\nTips: SpÃ¤nn mage och rumpa, andas lugnt!â€
},
{
name: â€œSquat Holdâ€,
description: â€œ1. GÃ¥ ner i djup knÃ¤bÃ¶j\n2. HÃ¥ll positionen\n3. Armarna rakt fram fÃ¶r balans\n4. Tyngden pÃ¥ hÃ¤larna\n\nTips: Se framÃ¥t, hÃ¥ll ryggen rak!â€
},
{
name: â€œTriceps Dipsâ€,
description: â€œ1. Sitt pÃ¥ golvet, hÃ¤nderna bakom dig\n2. BÃ¶j knÃ¤na, fÃ¶tterna i golvet\n3. Lyft hÃ¶ften frÃ¥n golvet\n4. BÃ¶j och strÃ¤ck armbÃ¥garna\n\nTips: ArmbÃ¥garna bakÃ¥t, inte ut Ã¥t sidorna!â€
}
]
},
{
name: â€œBlock 3: Funktionelltâ€,
rounds: 4,
workTime: 35,
restTime: 25,
exercises: [
{
name: â€œBurpee Hoppâ€,
description: â€œ1. StÃ¥ upprÃ¤tt\n2. SÃ¤tt hÃ¤nderna i golvet\n3. Hoppa benen bakÃ¥t\n4. Hoppa benen fram\n5. Hoppa pÃ¥ plats 3 gÃ¥nger\n\nTips: Explosiva hopp, landa mjukt!â€
},
{
name: â€œBear Crawlâ€,
description: â€œ1. PÃ¥ hÃ¤nder och fÃ¶tter, knÃ¤n ovanfÃ¶r golvet\n2. Crawla framÃ¥t 3-4 meter\n3. Crawla bakÃ¥t till start\n4. Repetera\n\nTips: HÃ¥ll ryggen rak, knÃ¤n lÃ¥gt!â€
},
{
name: â€œPlank Shoulder Tapsâ€,
description: â€œ1. I plankposition\n2. Lyft hÃ¶ger hand och nudda vÃ¤nster axel\n3. Tillbaka, byt hand\n4. FortsÃ¤tt vÃ¤xla\n\nTips: HÃ¥ll hÃ¶ften stilla, vrid inte!â€
},
{
name: â€œSkater Jumpsâ€,
description: â€œ1. Hoppa Ã¥t sidan pÃ¥ hÃ¶ger ben\n2. VÃ¤nster ben sveper bakom\n3. Hoppa tillbaka pÃ¥ vÃ¤nster ben\n4. FortsÃ¤tt vÃ¤xla sidor\n\nTips: Stora hopp, balansera pÃ¥ ett ben!â€
},
{
name: â€œSuperman Holdsâ€,
description: â€œ1. Ligg pÃ¥ mage\n2. StrÃ¤ck ut armarna framÃ¥t\n3. Lyft armar och ben samtidigt\n4. HÃ¥ll position\n\nTips: Titta ner i golvet, spÃ¤nn hela kroppen!â€
}
]
}
];

const currentWorkout = workout[currentBlock];
const currentExerciseData = currentWorkout.exercises[currentExercise];
const totalExercises = currentWorkout.exercises.length;

useEffect(() => {
let interval;
if (isRunning && timeLeft > 0) {
interval = setInterval(() => {
setTimeLeft(time => time - 1);
}, 1000);
} else if (timeLeft === 0 && isRunning) {
handleNextExercise();
}
return () => clearInterval(interval);
}, [isRunning, timeLeft]);

const handleStart = () => {
if (timeLeft === 0) {
setTimeLeft(isRest ? currentWorkout.restTime : currentWorkout.workTime);
}
setIsRunning(true);
};

const handlePause = () => {
setIsRunning(false);
};

const handleReset = () => {
setIsRunning(false);
setCurrentBlock(0);
setCurrentExercise(0);
setCurrentRound(1);
setTimeLeft(0);
setIsRest(false);
};

const handleNextExercise = () => {
if (isRest) {
// After rest, move to next exercise
if (currentExercise < totalExercises - 1) {
setCurrentExercise(currentExercise + 1);
setTimeLeft(currentWorkout.workTime);
setIsRest(false);
} else {
// End of exercises in round
if (currentRound < currentWorkout.rounds) {
setCurrentRound(currentRound + 1);
setCurrentExercise(0);
setTimeLeft(currentWorkout.workTime);
setIsRest(false);
} else {
// End of block
if (currentBlock < workout.length - 1) {
setCurrentBlock(currentBlock + 1);
setCurrentExercise(0);
setCurrentRound(1);
setTimeLeft(workout[currentBlock + 1].workTime);
setIsRest(false);
setIsRunning(false);
} else {
// Workout complete
setIsRunning(false);
setTimeLeft(0);
}
}
}
} else {
// After work, go to rest
setTimeLeft(currentWorkout.restTime);
setIsRest(true);
}
};

const isWorkoutComplete = currentBlock === workout.length - 1 &&
currentRound === currentWorkout.rounds &&
currentExercise === totalExercises - 1 &&
timeLeft === 0 && !isRunning;

return (
<div className="min-h-screen bg-gradient-to-br from-orange-600 via-red-600 to-red-800 p-4">
<div className="max-w-2xl mx-auto">
<div className="bg-white rounded-lg shadow-2xl p-6 mb-4">
<h1 className="text-3xl font-bold text-center text-red-700 mb-2">
ðŸ”¥ Brandmans IntervalltrÃ¤ning
</h1>
<p className="text-center text-gray-600 mb-4">
30 minuter â€¢ Kroppsvikt â€¢ Betonggolv OK
</p>

```
      {/* Progress */}
      <div className="bg-gray-100 rounded-lg p-4 mb-6">
        <div className="flex justify-between items-center mb-2">
          <span className="font-semibold text-gray-700">
            {currentWorkout.name}
          </span>
          <span className="text-sm text-gray-600">
            Varv {currentRound}/{currentWorkout.rounds}
          </span>
        </div>
        <div className="w-full bg-gray-300 rounded-full h-2">
          <div 
            className="bg-red-600 h-2 rounded-full transition-all"
            style={{
              width: `${((currentExercise + 1) / totalExercises) * 100}%`
            }}
          />
        </div>
      </div>

      {/* Timer Display */}
      <div className="text-center mb-6">
        <div className={`text-8xl font-bold mb-2 ${isRest ? 'text-blue-600' : 'text-red-600'}`}>
          {timeLeft}
        </div>
        <div className={`text-2xl font-semibold ${isRest ? 'text-blue-600' : 'text-red-600'}`}>
          {isRest ? 'ðŸ’§ VILA' : 'ðŸ’ª KÃ–R!'}
        </div>
      </div>

      {/* Current Exercise */}
      <div className="bg-gradient-to-r from-red-50 to-orange-50 rounded-lg p-6 mb-6">
        <div className="flex justify-between items-start mb-3">
          <h2 className="text-2xl font-bold text-gray-800">
            {isRest ? 'Vila - NÃ¤sta:' : currentExerciseData.name}
          </h2>
          <button
            onClick={() => setShowInfo(showInfo === currentExercise ? null : currentExercise)}
            className="text-red-600 hover:text-red-700"
          >
            <Info size={24} />
          </button>
        </div>
        
        {showInfo === currentExercise && (
          <div className="bg-white rounded p-4 mb-3 border-l-4 border-red-500">
            <pre className="whitespace-pre-wrap font-sans text-sm text-gray-700">
              {currentExerciseData.description}
            </pre>
          </div>
        )}

        <div className="text-sm text-gray-600">
          Ã–vning {currentExercise + 1} av {totalExercises}
        </div>
      </div>

      {/* Controls */}
      <div className="space-y-3 mb-6">
        {!isRunning ? (
          <button
            onClick={handleStart}
            className="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-lg flex items-center justify-center gap-2 text-lg"
          >
            <Play size={24} />
            {timeLeft === 0 ? 'Starta' : 'FortsÃ¤tt'}
          </button>
        ) : (
          <button
            onClick={handlePause}
            className="w-full bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-4 px-6 rounded-lg flex items-center justify-center gap-2 text-lg"
          >
            <Pause size={24} />
            Pausa
          </button>
        )}
        
        <div className="flex gap-3">
          <button
            onClick={handleReset}
            className="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 px-4 rounded-lg flex items-center justify-center gap-2 text-lg"
          >
            <RotateCcw size={20} />
            Ã…terstÃ¤ll
          </button>
          
          <button
            onClick={handleNextExercise}
            disabled={!isRunning && timeLeft === 0}
            className="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-4 rounded-lg flex items-center justify-center gap-2 text-lg disabled:bg-gray-400"
          >
            NÃ¤sta
            <ChevronRight size={20} />
          </button>
        </div>
      </div>

      {/* Workout Complete */}
      {isWorkoutComplete && (
        <div className="bg-green-100 border-2 border-green-500 rounded-lg p-6 text-center">
          <div className="text-4xl mb-2">ðŸŽ‰</div>
          <h3 className="text-2xl font-bold text-green-700 mb-2">
            Grattis! Passet klart!
          </h3>
          <p className="text-gray-700">
            Bra jobbat brandman! ðŸ’ªðŸ”¥
          </p>
        </div>
      )}

      {/* All Exercises List */}
      <div className="mt-6">
        <h3 className="font-bold text-gray-700 mb-3">Alla Ã¶vningar i detta block:</h3>
        <div className="space-y-2">
          {currentWorkout.exercises.map((ex, idx) => (
            <div 
              key={idx}
              className={`p-3 rounded ${
                idx === currentExercise 
                  ? 'bg-red-100 border-2 border-red-500' 
                  : 'bg-gray-50'
              }`}
            >
              <div className="font-semibold">{ex.name}</div>
              <div className="text-sm text-gray-600">
                {currentWorkout.workTime}s arbete / {currentWorkout.restTime}s vila
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</div>
```

);
};

export default FirefighterWorkout;
